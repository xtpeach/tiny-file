import{E as j}from"./base.a4c7cecc.js";/* empty css                */import{Z as G,a as W}from"./ZFormItem.99bc3a03.js";/* empty css              */import"./tooltip.f118fcb0.js";/* empty css               */import{E as H}from"./image-viewer.f2dd2a5b.js";/* empty css               */import{E as J}from"./radio.055628e3.js";/* empty css               */import{b4 as K}from"./index.8d3be363.js";import{g as O,v as M,l as Q,d as X}from"./admin-setting.5f735b40.js";import{z as Y,aq as A,w as F,j as e,n as $,o as m,k as v,l as n,p as l,W as I,c as T,m as b,a,s as ee,x as oe,b as h}from"./index.e2144cf2.js";import{t as te}from"./vue3-clipboard.esm-bundler.34366eba.js";import{E as _}from"./request.538cacc7.js";import{E as q}from"./index.911dd79c.js";import{b as R}from"./route-block.89f12ae7.js";import{_ as ne}from"./plugin-vue_export-helper.21dcd24c.js";import{E as ie}from"./index.c45a91e5.js";import{E as ae}from"./index.f710691a.js";import{E as le}from"./index.b76f3ddb.js";import{v as se}from"./directive.a214ca06.js";import"./index.5cf4e3bb.js";import"./index.4971e309.js";import"./debounce.ef6045fb.js";import"./scroll.2d8cca42.js";import"./event.776e7e11.js";import"./index.d27b8c90.js";import"./event.3ec63147.js";import"./focus-trap.3717ddd7.js";import"./validator.e67486a3.js";const y=Y({});function re(){const{data:r,reload:o}=A(Q,{formatResult:t=>t.data}),{loading:u,run:g}=A(X,{manual:!0,onSuccess(){_({message:"\u4FDD\u5B58\u6210\u529F",type:"success"})}}),f=()=>{g(r.value)},d=()=>{O().then(t=>{y.value=t.data})};return{data:r,reload:o,saveData:f,saveLoading:u,load2FAInfo:d,twoFAData:y,copyTwoFASecret:()=>{te(y.value.secret).then(()=>{_.success("\u590D\u5236\u6210\u529F")})},verifyCodeAndBind:()=>{M(y.value).then(t=>{_.success("\u7ED1\u5B9A\u6210\u529F"),o()})},rebind:()=>{r.value.loginVerifySecret="",d()},cancelBind:()=>{q.confirm("\u662F\u5426\u786E\u8BA4\u53D6\u6D88\u7ED1\u5B9A\uFF0C\u786E\u8BA4\u540E\u5C06\u81EA\u52A8\u6062\u590D\u4E3A\u56FE\u5F62\u9A8C\u8BC1\u7801","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"success",callback:t=>{t==="confirm"&&(r.value.loginVerifySecret="",r.value.loginVerifyMode="image")}})},validBind:()=>{q.prompt("\u8BF7\u8F93\u5165\u53CC\u56E0\u7D20\u8BA4\u8BC1 APP \u4E2D\u7684\u9A8C\u8BC1\u7801","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",inputValidator(t){return!!t},inputErrorMessage:"\u9A8C\u8BC1\u7801\u4E0D\u80FD\u4E3A\u7A7A."}).then(({value:t})=>{let i={secret:r.value.loginVerifySecret,code:t};M(i).then(()=>{_.success("\u9A8C\u8BC1\u6210\u529F")})})}}}const k=r=>(ee("data-v-6be252db"),r=r(),oe(),r),de=a(" \u5B89\u5168\u8BBE\u7F6E "),ce=a(" \u6B64\u5904\u8BBE\u7F6E\u53EF\u4FDD\u62A4\u60A8\u7684\u7AD9\u70B9\u5B89\u5168 "),me=a(" \u542F\u7528\u540E\uFF0C\u4F1A\u5728\u95E8\u6237\u663E\u793A\u540E\u53F0\u767B\u5F55\u5165\u53E3\uFF0C\u8BF7\u6839\u636E\u81EA\u8EAB\u60C5\u51B5\u9009\u62E9\u662F\u5426\u542F\u7528 "),ue=a("\u4E0D\u542F\u7528\u767B\u5F55\u9A8C\u8BC1"),fe=a("\u542F\u7528\u56FE\u7247\u9A8C\u8BC1\u7801"),pe=a("\u542F\u7528\u53CC\u56E0\u7D20\u8BA4\u8BC1"),_e=a(" \u56FE\u7247\u9A8C\u8BC1\u7801\u4E5F\u53EF\u80FD\u4F1A\u88AB\u8BC6\u522B\uFF0C\u4E0D\u80FD\u5B8C\u5168\u62B5\u6321\u66B4\u529B\u7834\u89E3\u3002 "),ye=a(" \u53CC\u56E0\u7D20\u8BA4\u8BC1\u53EF\u5B8C\u7F8E\u4FDD\u62A4\u767B\u5F55\u8BA4\u8BC1\uFF0C\u53EF\u4F7F\u7528\u4EFB\u610F\u652F\u6301 2FA \u8BA4\u8BC1\u7684\u8F6F\u4EF6\uFF0C\u5982 "),ge=k(()=>h("b",null,"Google \u8EAB\u4EFD\u9A8C\u8BC1\u5668",-1)),Ve=a("\u3001"),ve=k(()=>h("b",null,"Microsoft Authenticator",-1)),be=a(" \u7B49\u8F6F\u4EF6. "),he=k(()=>h("br",null,null,-1)),ke={key:0,class:"w-full"},Se=a("\u91CD\u65B0\u7ED1\u5B9A"),Be=a("\u53D6\u6D88\u7ED1\u5B9A"),Ce=a("\u9A8C\u8BC1\u7ED1\u5B9A"),Ee={key:1},we=a(" \u53EF\u626B\u63CF\u4E0A\u65B9\u4E8C\u7EF4\u7801\u6216\u590D\u5236\u4E0B\u65B9\u5BC6\u94A5\u5230\u652F\u6301\u53CC\u56E0\u7D20\u8BA4\u8BC1\u7684\u8F6F\u4EF6\u4E2D\u6DFB\u52A0\u3002 "),xe=a("\u9A8C\u8BC1\u5E76\u7ED1\u5B9A"),Me=a(" \u8BF7\u7ED1\u5B9A\u53CC\u56E0\u7D20\u8BA4\u8BC1\u8F6F\u4EF6\u540E\uFF0C\u8F93\u5165\u663E\u793A\u7684\u9A8C\u8BC1\u7801\u8FDB\u884C\u7ED1\u5B9A "),z={__name:"index",setup(r){const{data:o,saveData:u,saveLoading:g,load2FAInfo:f,twoFAData:d,copyTwoFASecret:S,verifyCodeAndBind:B,rebind:C,cancelBind:E,validBind:w}=re();return F(()=>{var t;return(t=o.value)==null?void 0:t.loginVerifyMode},(t,i)=>{(t==="off"||t==="image")&&i&&u(),t==="2fa"&&!o.value.loginVerifySecret&&f()}),F(()=>{var t;return(t=o.value)==null?void 0:t.showLogin},(t,i)=>{t!==i&&i!==void 0&&u()}),(t,i)=>{const D=ie,p=G,V=J,c=j,L=H,U=le,x=ae,N=W,Z=se;return e(o)?$((m(),v(N,{key:0,model:e(o)},{"form-title":n(()=>[de]),"form-sub-title":n(()=>[ce]),default:n(()=>[l(p,{label:"\u662F\u5426\u663E\u793A\u767B\u5F55\u5165\u53E3"},{tips:n(()=>[me]),default:n(()=>[l(D,{modelValue:e(o).showLogin,"onUpdate:modelValue":i[0]||(i[0]=s=>e(o).showLogin=s)},null,8,["modelValue"])]),_:1}),l(p,{label:"\u767B\u5F55\u9A8C\u8BC1\u65B9\u5F0F"},I({default:n(()=>[l(V,{modelValue:e(o).loginVerifyMode,"onUpdate:modelValue":i[1]||(i[1]=s=>e(o).loginVerifyMode=s),label:"off"},{default:n(()=>[ue]),_:1},8,["modelValue"]),l(V,{modelValue:e(o).loginVerifyMode,"onUpdate:modelValue":i[2]||(i[2]=s=>e(o).loginVerifyMode=s),label:"image"},{default:n(()=>[fe]),_:1},8,["modelValue"]),l(V,{modelValue:e(o).loginVerifyMode,"onUpdate:modelValue":i[3]||(i[3]=s=>e(o).loginVerifyMode=s),label:"2fa"},{default:n(()=>[pe]),_:1},8,["modelValue"])]),_:2},[e(o).loginVerifyMode==="image"?{name:"tips",fn:n(()=>[_e])}:void 0,e(o).loginVerifyMode==="2fa"?{name:"tips",fn:n(()=>[ye,ge,Ve,ve,be,he])}:void 0]),1024),e(o).loginVerifyMode==="2fa"?(m(),v(p,{key:0,label:"\u53CC\u56E0\u7D20\u8BA4\u8BC1\u5BC6\u94A5"},I({default:n(()=>{var s;return[e(o).loginVerifySecret?(m(),T("div",ke,[l(c,{size:"small",type:"primary",onClick:e(C)},{default:n(()=>[Se]),_:1},8,["onClick"]),l(c,{size:"small",type:"primary",onClick:e(E)},{default:n(()=>[Be]),_:1},8,["onClick"]),l(c,{size:"small",type:"primary",onClick:e(w)},{default:n(()=>[Ce]),_:1},8,["onClick"])])):(m(),T("div",Ee,[l(L,{onClick:e(f),src:(s=e(d))==null?void 0:s.qrcode},null,8,["onClick","src"]),l(x,{readonly:"",modelValue:e(d).secret,"onUpdate:modelValue":i[4]||(i[4]=P=>e(d).secret=P)},{append:n(()=>[l(U,{class:"item",effect:"dark",content:"\u590D\u5236",placement:"bottom"},{default:n(()=>[l(c,{onClick:e(S),icon:e(K)},null,8,["onClick","icon"])]),_:1})]),_:1},8,["modelValue"])]))]}),_:2},[e(o).loginVerifySecret?void 0:{name:"tips",fn:n(()=>[we])}]),1024)):b("",!0),e(o).loginVerifyMode==="2fa"&&!e(o).loginVerifySecret?(m(),v(p,{key:1,label:"\u53CC\u56E0\u7D20\u8BA4\u8BC1\u9A8C\u8BC1\u7801"},{tips:n(()=>[Me]),default:n(()=>[l(x,{modelValue:e(d).code,"onUpdate:modelValue":i[5]||(i[5]=s=>e(d).code=s)},null,8,["modelValue"]),l(c,{onClick:e(B),type:"primary"},{default:n(()=>[xe]),_:1},8,["onClick"])]),_:1})):b("",!0)]),_:1},8,["model"])),[[Z,e(g)]]):b("",!0)}}};typeof R=="function"&&R(z);var so=ne(z,[["__scopeId","data-v-6be252db"]]);export{so as default};

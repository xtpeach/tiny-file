import{E as W}from"./base.a4c7cecc.js";import{E as X}from"./card.37bc6fbf.js";import{E as Z,a as ee,b as te,c as oe,z as le,f as ae,h as ne,i as re}from"./zh-cn.00619e4c.js";/* empty css              *//* empty css            *//* empty css               *//* empty css                  *//* empty css               */import{E as se,a as ie}from"./checkbox.c36725d4.js";import"./tooltip.f118fcb0.js";/* empty css                */import{_ as de}from"./SvgIcon.26213fd5.js";/* empty css                     */import{E as pe,a as me}from"./form-item.15e42d00.js";/* empty css               *//* empty css               */import{u as ue}from"./useLinkSetting.aa2b065a.js";import{aS as ce,V as L}from"./index.8d3be363.js";import{l as _e}from"./admin-storage.0cee6b67.js";import{t as fe}from"./vue3-clipboard.esm-bundler.34366eba.js";import{l as ge}from"./admin-setting.5f735b40.js";import{b as z}from"./route-block.89f12ae7.js";import{_ as he}from"./plugin-vue_export-helper.21dcd24c.js";import{E as we}from"./index.c45a91e5.js";import{E as ve,a as ye}from"./index.0866a0f5.js";import{E as be}from"./index.f710691a.js";import{E as f}from"./request.538cacc7.js";import{E as Ve}from"./index.911dd79c.js";import{E as ke}from"./index.b76f3ddb.js";import{B as Ee,z as g,I as xe,o as h,c as b,p as e,l as a,b as r,j as s,m as Ce,q as De,F as Le,Y as ze,k as Se,t as w,a as V,s as Te,x as Ue}from"./index.e2144cf2.js";import"./dayjs.min.94cd9439.js";import"./index.4971e309.js";import"./index.893d9621.js";import"./index.7fa0be7b.js";import"./event.3ec63147.js";import"./debounce.ef6045fb.js";import"./index.fa9b58ef.js";import"./isEqual.f1560033.js";import"./event.776e7e11.js";import"./index.5cf4e3bb.js";import"./validator.e67486a3.js";import"./index.fc5d6137.js";import"./scroll.2d8cca42.js";import"./index.d27b8c90.js";import"./focus-trap.3717ddd7.js";const S=c=>(Te("data-v-6efe972e"),c=c(),Ue(),c),Ke={class:"zfile-admin-down-link"},Re={class:"flex justify-between"},Ie=S(()=>r("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," \u76F4\u94FE\u65E5\u5FD7 ",-1)),Ae={key:0,class:"flex space-x-1.5 justify-center items-center cursor-pointer"},Be=S(()=>r("span",{class:"text-gray-400 text-sm font-bold"},"\u8BB0\u5F55\u4E0B\u8F7D\u65E5\u5FD7\uFF1A",-1)),Fe={class:"mt-4"},Pe={class:"flex justify-between space-x-20"},je={class:"text-gray-400"},Me=V("\u67E5\u8BE2"),Ne=V("\u6279\u91CF\u5220\u9664"),Ye={class:"space-x-2"},$e=V("\u5220\u9664"),T={__name:"log",setup(c){const{data:v,saveData:U,saveLoading:qe}=ue(),o=Ee({shortKey:"",storageKey:null,page:1,limit:10,path:"",ip:"",userAgent:"",referer:"",date:"",dateFrom:"",dateTo:"",total:0}),K=n=>{o.limit=n,o.page=1,p()},R=n=>{o.page=n,p()},k=g(),p=()=>{o.date instanceof Array?(o.dateFrom=o.date[0],o.dateTo=o.date[1]):(o.dateFrom="",o.dateTo=""),ae(o).then(n=>{k.value=n.data,o.total=n.dataCount})};xe(()=>{p(),A(),I()});const E=g(),I=()=>{ge().then(n=>{E.value=n.data})},x=g(),A=()=>{_e().then(n=>{x.value=n.data})},B=n=>{ne(n).then(l=>{f.success("\u5220\u9664\u6210\u529F"),p()})},C=g(),F=()=>{let n=C.value.getSelectionRows();if(n.length===0){f.warning("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u6761\u6570\u636E");return}Ve.confirm("\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{let l=n.map(_=>_.id);re({ids:l}).then(_=>{f.success("\u5220\u9664\u6210\u529F"),p()})})};let P=n=>{fe(n).then(()=>{f.success("\u590D\u5236\u6210\u529F")})},j=n=>{window.open(`${E.value.domain}/s/${n}`)};return(n,l)=>{const _=we,M=ve,N=ye,d=pe,m=be,Y=Z,y=W,$=me,i=se,q=ke,D=de,H=ee,O=ie,G=te,J=oe,Q=X;return h(),b("div",Ke,[e(Q,null,{default:a(()=>[r("div",Re,[Ie,s(v)?(h(),b("div",Ae,[Be,e(_,{onChange:s(U),"active-text":"\u662F","inline-prompt":"","inactive-text":"\u5426",modelValue:s(v).recordDownloadLog,"onUpdate:modelValue":l[0]||(l[0]=t=>s(v).recordDownloadLog=t)},null,8,["onChange","modelValue"])])):Ce("",!0)]),r("div",Fe,[e($,{inline:"",modelValue:o,"onUpdate:modelValue":l[8]||(l[8]=t=>De(o)?o.value=t:null)},{default:a(()=>[e(d,{label:"\u5B58\u50A8\u6E90"},{default:a(()=>[e(N,{clearable:"",teleported:!1,modelValue:o.storageKey,"onUpdate:modelValue":l[1]||(l[1]=t=>o.storageKey=t)},{default:a(()=>[(h(!0),b(Le,null,ze(x.value,t=>(h(),Se(M,{key:t.id,label:t.name,value:t.key},{default:a(()=>[r("div",Pe,[r("span",null,w(t.name),1),r("span",je,w(t.type.description),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"\u77ED\u94FE Key"},{default:a(()=>[e(m,{modelValue:o.shortKey,"onUpdate:modelValue":l[2]||(l[2]=t=>o.shortKey=t)},null,8,["modelValue"])]),_:1}),e(d,{label:"\u6587\u4EF6\u540D"},{default:a(()=>[e(m,{modelValue:o.path,"onUpdate:modelValue":l[3]||(l[3]=t=>o.path=t)},null,8,["modelValue"])]),_:1}),e(d,{label:"\u8BF7\u6C42 IP"},{default:a(()=>[e(m,{modelValue:o.ip,"onUpdate:modelValue":l[4]||(l[4]=t=>o.ip=t)},null,8,["modelValue"])]),_:1}),e(d,{label:"UserAgent"},{default:a(()=>[e(m,{modelValue:o.userAgent,"onUpdate:modelValue":l[5]||(l[5]=t=>o.userAgent=t)},null,8,["modelValue"])]),_:1}),e(d,{label:"Referer"},{default:a(()=>[e(m,{modelValue:o.referer,"onUpdate:modelValue":l[6]||(l[6]=t=>o.referer=t)},null,8,["modelValue"])]),_:1}),e(d,{label:"\u521B\u5EFA\u65F6\u95F4"},{default:a(()=>[e(Y,{modelValue:o.date,"onUpdate:modelValue":l[7]||(l[7]=t=>o.date=t),type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],"range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue","default-time"])]),_:1}),e(d,null,{default:a(()=>[e(y,{type:"primary",icon:s(ce),onClick:p},{default:a(()=>[Me]),_:1},8,["icon"])]),_:1})]),_:1},8,["modelValue"]),r("div",null,[e(y,{onClick:F,icon:s(L),type:"danger"},{default:a(()=>[Ne]),_:1},8,["icon"])]),e(O,{ref_key:"linkTableRef",ref:C,size:"large",data:k.value},{default:a(()=>[e(i,{type:"selection",width:"55"}),e(i,{width:"120",label:"\u5B58\u50A8\u6E90\u540D\u79F0"},{default:a(t=>{var u;return[e(q,{content:(u=t.row.storageType)==null?void 0:u.description,placement:"right"},{default:a(()=>[r("span",null,w(t.row.storageName),1)]),_:2},1032,["content"])]}),_:1}),e(i,{"show-tooltip-when-overflow":"",prop:"shortKey",label:"\u77ED\u94FE key"},{default:a(t=>[r("div",Ye,[r("span",null,w(t.row.shortKey),1),e(D,{onClick:u=>s(P)(t.row.shortKey),class:"inline cursor-pointer",name:"copy"},null,8,["onClick"]),e(D,{onClick:u=>s(j)(t.row.shortKey),class:"inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])])]),_:1}),e(i,{"show-tooltip-when-overflow":"",prop:"path",label:"\u8DEF\u5F84"}),e(i,{width:"100","show-tooltip-when-overflow":"",prop:"ip",label:"\u8BF7\u6C42 ip"}),e(i,{width:"180","show-tooltip-when-overflow":"",prop:"userAgent",label:"UserAgent"}),e(i,{width:"150","show-tooltip-when-overflow":"",prop:"referer",label:"Referer"}),e(i,{width:"180",prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4"}),e(i,{width:"120",label:"\u64CD\u4F5C"},{default:a(t=>[e(H,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664?",onConfirm:u=>B(t.row.id)},{reference:a(()=>[e(y,{icon:s(L),type:"danger"},{default:a(()=>[$e]),_:1},8,["icon"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),e(J,{locale:s(le)},{default:a(()=>[e(G,{class:"mt-3","page-size":o.limit,background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:R,onSizeChange:K,"current-page":o.page,"onUpdate:current-page":l[9]||(l[9]=t=>o.page=t),"default-current-page":10,"page-sizes":[10,50,100,200,1e3,99999999],total:o.total},null,8,["page-size","current-page","total"])]),_:1},8,["locale"])])]),_:1})])}}};typeof z=="function"&&z(T);var Bt=he(T,[["__scopeId","data-v-6efe972e"]]);export{Bt as default};

import{o as u,k as v,p as a,e as R,z as d,I as B,c as L,b as s,l as i,j as e,m as S,K as D,ap as N,a as x,s as j,x as F}from"./index.e2144cf2.js";import{E as $}from"./base.a4c7cecc.js";import{E as T,a as H}from"./form-item.15e42d00.js";/* empty css               */import"./tooltip.f118fcb0.js";/* empty css               */import{E as K}from"./link.92874eff.js";import{E as P}from"./image-viewer.f2dd2a5b.js";/* empty css              */import{_ as A}from"./zfile-basic.db34cdfd.js";import{l as G,c as J,a as O,b as Q}from"./login.6a9bfef3.js";import{aL as W,aM as X,P as Y,aN as Z}from"./index.8d3be363.js";import{i as ee}from"./install.e2789487.js";import{_ as te}from"./plugin-vue_export-helper.21dcd24c.js";import{E as ae}from"./index.f710691a.js";import{r as oe}from"./BadgeCheckIcon.ec7d0d76.js";import{E as k}from"./request.538cacc7.js";import{E as le}from"./index.b76f3ddb.js";import"./index.5cf4e3bb.js";import"./isEqual.f1560033.js";import"./index.4971e309.js";import"./debounce.ef6045fb.js";import"./scroll.2d8cca42.js";import"./event.776e7e11.js";import"./focus-trap.3717ddd7.js";import"./event.3ec63147.js";function ie(f,m){return u(),v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])}const h=f=>(j("data-v-f0afc0e2"),f=f(),F(),f),se={class:"h-full min-h-screen bg-gray-100 text-gray-900 flex justify-center items-center"},re={class:"h-full lg:h-auto max-w-screen-lg bg-white shadow-xl sm:rounded-xl flex flex-1"},ne=h(()=>s("div",{class:"flex-1 bg-gray-50 text-center hidden lg:flex rounded-l-xl"},[s("div",{class:"m-12 xl:m-16 w-full bg-contain bg-center bg-no-repeat zfile-login-logo"})],-1)),de={class:"w-full lg:w-1/2 xl:w-1/2 mt-10 p-6 sm:p-12"},fe={class:"mt-0 flex flex-col items-center"},me={class:"text-2xl mt-0 xl:text-3xl font-extrabold box animate__animated animate__fadeInDown"},ce={class:"w-full flex-1"},ue=N('<div class="my-12 relative" data-v-f0afc0e2><div class="absolute inset-0 flex items-center" aria-hidden="true" data-v-f0afc0e2><div class="w-full border-t text-gray-600" data-v-f0afc0e2></div></div><div class="relative flex justify-center text-sm" data-v-f0afc0e2><span class="px-2 bg-white text-sm leading-none text-gray-600 tracking-wide font-medium" data-v-f0afc0e2>\u7BA1\u7406\u5458\u767B\u5F55</span></div></div>',1),pe={class:"flex space-x-5 w-full"},_e=x(" \u8BF7\u8054\u7CFB\u7BA1\u7406\u5458 "),ge=h(()=>s("br",null,null,-1)),ve=h(()=>s("a",{target:"_blank",class:"text-blue-400",href:"https://docs.zfile.vip/question#reset-pwd"},"\u70B9\u51FB\u53EF\u524D\u5F80\u6587\u6863\u67E5\u770B\u64CD\u4F5C\u65B9\u5F0F",-1)),xe=x("\u5FD8\u8BB0\u5BC6\u7801"),he=x("\u767B\u5F55"),be={__name:"login",setup(f){let m=R(),p=d(!1),b=d(),l=d({username:"",password:"",verifyCode:"",verifyCodeUUID:""});const V=o=>{window.open(o)};let z=d({username:[{required:!0,message:"\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:["change","blur"]}],password:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:["change","blur"]}]});const I=()=>{b.value.validate(o=>{o?(p.value=!0,O(l.value).then(t=>{window.localStorage.setItem("zfile-token",t.data),k({message:"\u767B\u5F55\u6210\u529F",type:"success",duration:1e3,onClose(){m.push("/admin")}})}).catch(()=>{p.value=!1,g()})):k.warning("\u8BF7\u8F93\u5165\u8D26\u53F7\u5BC6\u7801!")})},_=d("");G().then(o=>{_.value=o.data});const w=d({}),g=()=>{Q().then(o=>{w.value=o.data,l.value.verifyCodeUUID=o.data.uuid})};return g(),B(()=>{ee().then(o=>{o.data||m.push("/install")}),J().then(o=>{o.data&&m.push("/admin")})}),(o,t)=>{const c=ae,n=T,C=P,E=K,U=le,M=$,q=H;return u(),L("div",se,[s("div",re,[ne,s("div",de,[s("div",fe,[s("h1",me,[s("img",{class:"w-16 cursor-pointer",onClick:t[0]||(t[0]=r=>V("https://github.com/zhaojun1998/zfile")),src:A})]),s("div",ce,[ue,a(q,{onSubmit:t[6]||(t[6]=D(()=>{},["prevent"])),ref_key:"loginFormRef",ref:b,rules:e(z),model:e(l),class:"zfile-login-form",size:"large"},{default:i(()=>[a(n,{class:"box animate__animated animate__fadeInUp",prop:"username"},{default:i(()=>[a(c,{placeholder:"\u7BA1\u7406\u5458\u8D26\u53F7","prefix-icon":e(W),modelValue:e(l).username,"onUpdate:modelValue":t[1]||(t[1]=r=>e(l).username=r),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),a(n,{class:"box animate__animated animate__fadeInUp",prop:"password"},{default:i(()=>[a(c,{placeholder:"\u7BA1\u7406\u5458\u5BC6\u7801",type:"password","show-password":"","prefix-icon":e(X),modelValue:e(l).password,"onUpdate:modelValue":t[2]||(t[2]=r=>e(l).password=r),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),_.value==="2fa"?(u(),v(n,{key:0,class:"box animate__animated animate__fadeInUp",prop:"verifyCode"},{default:i(()=>[a(c,{placeholder:"\u53CC\u56E0\u7D20\u8BA4\u8BC1\u9A8C\u8BC1\u7801","prefix-icon":e(Y),modelValue:e(l).verifyCode,"onUpdate:modelValue":t[3]||(t[3]=r=>e(l).verifyCode=r),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1})):_.value==="image"?(u(),v(n,{key:1,class:"box animate__animated animate__fadeInUp",prop:"verifyCode"},{default:i(()=>{var r;return[s("div",pe,[a(c,{class:"flex-1",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801","prefix-icon":e(ie),modelValue:e(l).verifyCode,"onUpdate:modelValue":t[4]||(t[4]=y=>e(l).verifyCode=y),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"]),a(C,{src:(r=w.value)==null?void 0:r.imgBase64,onClick:t[5]||(t[5]=y=>g())},null,8,["src"])])]}),_:1})):S("",!0),a(n,{class:"box animate__animated animate__fadeInUp float-right"},{default:i(()=>[a(U,{class:"item",effect:"dark",placement:"left"},{content:i(()=>[_e,ge,ve]),default:i(()=>[a(E,{icon:e(Z),underline:!1,class:"zfile-float-right"},{default:i(()=>[xe]),_:1},8,["icon"])]),_:1})]),_:1}),a(n,{class:"clear-right"},{default:i(()=>[a(M,{loading:e(p),class:"w-full mb-0","native-type":"submit",type:"primary",icon:e(oe),onClick:I},{default:i(()=>[he]),_:1},8,["loading","icon"])]),_:1})]),_:1},8,["rules","model"])])])])])])}}};var Je=te(be,[["__scopeId","data-v-f0afc0e2"]]);export{Je as default};

!function(){var e=document.createElement("style");e.innerHTML=".zfile-admin-down-link[data-v-6efe972e] .el-select-dropdown__item{padding-right:15px}.zfile-admin-down-link[data-v-6efe972e] .el-dialog__header{text-align:center}.zfile-admin-down-link[data-v-6efe972e] .el-dialog__body{height:80vh;overflow-y:auto}\n",document.head.appendChild(e),System.register(["./base-legacy.42deb1c2.js","./card-legacy.6590ec6e.js","./zh-cn-legacy.becab793.js","./input-legacy.1469b40d.js","./tag-legacy.b431dc88.js","./select-legacy.66ea6cce.js","./scrollbar-legacy.711cb4b5.js","./popper-legacy.59994c93.js","./checkbox-legacy.e0c4ee5b.js","./tooltip-legacy.f5af8fcd.js","./popover-legacy.0804fd9b.js","./SvgIcon-legacy.87916a13.js","./table-column-legacy.a41d2135.js","./form-item-legacy.2f6cdb0b.js","./button-legacy.de6f77a5.js","./switch-legacy.96b9f14f.js","./useLinkSetting-legacy.279d1ceb.js","./index-legacy.5f3309bc.js","./admin-storage-legacy.67d40a34.js","./vue3-clipboard.esm-bundler-legacy.fd707006.js","./admin-setting-legacy.996e7b8d.js","./route-block-legacy.9534e494.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./index-legacy.77ebc7ec.js","./index-legacy.b797079c.js","./index-legacy.9da1c355.js","./request-legacy.2cf0cbaa.js","./index-legacy.53a36cc9.js","./index-legacy.a940d7b6.js","./index-legacy.36e5d91f.js","./dayjs.min-legacy.642121c8.js","./index-legacy.2783f16d.js","./index-legacy.9e8e5699.js","./index-legacy.886e1b44.js","./event-legacy.0bfbd831.js","./debounce-legacy.5562f648.js","./index-legacy.fcb41667.js","./isEqual-legacy.d3a6f1d7.js","./event-legacy.39ad8904.js","./index-legacy.61ab75a6.js","./validator-legacy.9c827f10.js","./index-legacy.38393ead.js","./scroll-legacy.9150773b.js","./index-legacy.db387664.js","./focus-trap-legacy.c22d27e1.js"],(function(e){"use strict";var n,t,a,l,o,u,c,i,r,d,f,s,g,p,y,m,b,h,v,j,w,x,_,V,k,C,z,E,U,K,A,D,T,S,L,Y,F,I,R,q,H,M,B,N,P,G,J,O;return{setters:[function(e){n=e.E},function(e){t=e.E},function(e){a=e.E,l=e.a,o=e.b,u=e.c,c=e.z,i=e.f,r=e.h,d=e.i},function(){},function(){},function(){},function(){},function(){},function(e){f=e.E,s=e.a},function(){},function(){},function(e){g=e._},function(){},function(e){p=e.E,y=e.a},function(){},function(){},function(e){m=e.u},function(e){b=e.aS,h=e.V},function(e){v=e.l},function(e){j=e.t},function(e){w=e.l},function(e){x=e.b},function(e){_=e._},function(e){V=e.E},function(e){k=e.E,C=e.a},function(e){z=e.E},function(e){E=e.E},function(e){U=e.E},function(e){K=e.E},function(e){A=e.B,D=e.z,T=e.I,S=e.o,L=e.c,Y=e.p,F=e.l,I=e.b,R=e.j,q=e.m,H=e.q,M=e.F,B=e.Y,N=e.k,P=e.t,G=e.a,J=e.s,O=e.x},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var Q=function(e){return J("data-v-6efe972e"),e=e(),O(),e},W={class:"zfile-admin-down-link"},X={class:"flex justify-between"},Z=Q((function(){return I("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," 直链日志 ",-1)})),$={key:0,class:"flex space-x-1.5 justify-center items-center cursor-pointer"},ee=Q((function(){return I("span",{class:"text-gray-400 text-sm font-bold"},"记录下载日志：",-1)})),ne={class:"mt-4"},te={class:"flex justify-between space-x-20"},ae={class:"text-gray-400"},le=G("查询"),oe=G("批量删除"),ue={class:"space-x-2"},ce=G("删除"),ie={__name:"log",setup:function(e){var x=m(),_=x.data,G=x.saveData,J=(x.saveLoading,A({shortKey:"",storageKey:null,page:1,limit:10,path:"",ip:"",userAgent:"",referer:"",date:"",dateFrom:"",dateTo:"",total:0})),O=function(e){J.limit=e,J.page=1,re()},Q=function(e){J.page=e,re()},ie=D(),re=function(){J.date instanceof Array?(J.dateFrom=J.date[0],J.dateTo=J.date[1]):(J.dateFrom="",J.dateTo=""),i(J).then((function(e){ie.value=e.data,J.total=e.dataCount}))};T((function(){re(),ge(),fe()}));var de=D(),fe=function(){w().then((function(e){de.value=e.data}))},se=D(),ge=function(){v().then((function(e){se.value=e.data}))},pe=D(),ye=function(){var e=pe.value.getSelectionRows();0!==e.length?U.confirm("是否确认删除？","提示",{type:"warning"}).then((function(){var n=e.map((function(e){return e.id}));d({ids:n}).then((function(e){E.success("删除成功"),re()}))})):E.warning("请至少选择一条数据")},me=function(e){j(e).then((function(){E.success("复制成功")}))},be=function(e){window.open("".concat(de.value.domain,"/s/").concat(e))};return function(e,i){var d=V,m=k,v=C,j=p,w=z,x=a,U=n,A=y,D=f,T=K,de=g,fe=l,ge=s,he=o,ve=u,je=t;return S(),L("div",W,[Y(je,null,{default:F((function(){return[I("div",X,[Z,R(_)?(S(),L("div",$,[ee,Y(d,{onChange:R(G),"active-text":"是","inline-prompt":"","inactive-text":"否",modelValue:R(_).recordDownloadLog,"onUpdate:modelValue":i[0]||(i[0]=function(e){return R(_).recordDownloadLog=e})},null,8,["onChange","modelValue"])])):q("",!0)]),I("div",ne,[Y(A,{inline:"",modelValue:J,"onUpdate:modelValue":i[8]||(i[8]=function(e){return H(J)?J.value=e:null})},{default:F((function(){return[Y(j,{label:"存储源"},{default:F((function(){return[Y(v,{clearable:"",teleported:!1,modelValue:J.storageKey,"onUpdate:modelValue":i[1]||(i[1]=function(e){return J.storageKey=e})},{default:F((function(){return[(S(!0),L(M,null,B(se.value,(function(e){return S(),N(m,{key:e.id,label:e.name,value:e.key},{default:F((function(){return[I("div",te,[I("span",null,P(e.name),1),I("span",ae,P(e.type.description),1)])]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Y(j,{label:"短链 Key"},{default:F((function(){return[Y(w,{modelValue:J.shortKey,"onUpdate:modelValue":i[2]||(i[2]=function(e){return J.shortKey=e})},null,8,["modelValue"])]})),_:1}),Y(j,{label:"文件名"},{default:F((function(){return[Y(w,{modelValue:J.path,"onUpdate:modelValue":i[3]||(i[3]=function(e){return J.path=e})},null,8,["modelValue"])]})),_:1}),Y(j,{label:"请求 IP"},{default:F((function(){return[Y(w,{modelValue:J.ip,"onUpdate:modelValue":i[4]||(i[4]=function(e){return J.ip=e})},null,8,["modelValue"])]})),_:1}),Y(j,{label:"UserAgent"},{default:F((function(){return[Y(w,{modelValue:J.userAgent,"onUpdate:modelValue":i[5]||(i[5]=function(e){return J.userAgent=e})},null,8,["modelValue"])]})),_:1}),Y(j,{label:"Referer"},{default:F((function(){return[Y(w,{modelValue:J.referer,"onUpdate:modelValue":i[6]||(i[6]=function(e){return J.referer=e})},null,8,["modelValue"])]})),_:1}),Y(j,{label:"创建时间"},{default:F((function(){return[Y(x,{modelValue:J.date,"onUpdate:modelValue":i[7]||(i[7]=function(e){return J.date=e}),type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue","default-time"])]})),_:1}),Y(j,null,{default:F((function(){return[Y(U,{type:"primary",icon:R(b),onClick:re},{default:F((function(){return[le]})),_:1},8,["icon"])]})),_:1})]})),_:1},8,["modelValue"]),I("div",null,[Y(U,{onClick:ye,icon:R(h),type:"danger"},{default:F((function(){return[oe]})),_:1},8,["icon"])]),Y(ge,{ref_key:"linkTableRef",ref:pe,size:"large",data:ie.value},{default:F((function(){return[Y(D,{type:"selection",width:"55"}),Y(D,{width:"120",label:"存储源名称"},{default:F((function(e){var n;return[Y(T,{content:null===(n=e.row.storageType)||void 0===n?void 0:n.description,placement:"right"},{default:F((function(){return[I("span",null,P(e.row.storageName),1)]})),_:2},1032,["content"])]})),_:1}),Y(D,{"show-tooltip-when-overflow":"",prop:"shortKey",label:"短链 key"},{default:F((function(e){return[I("div",ue,[I("span",null,P(e.row.shortKey),1),Y(de,{onClick:function(n){return R(me)(e.row.shortKey)},class:"inline cursor-pointer",name:"copy"},null,8,["onClick"]),Y(de,{onClick:function(n){return R(be)(e.row.shortKey)},class:"inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])])]})),_:1}),Y(D,{"show-tooltip-when-overflow":"",prop:"path",label:"路径"}),Y(D,{width:"100","show-tooltip-when-overflow":"",prop:"ip",label:"请求 ip"}),Y(D,{width:"180","show-tooltip-when-overflow":"",prop:"userAgent",label:"UserAgent"}),Y(D,{width:"150","show-tooltip-when-overflow":"",prop:"referer",label:"Referer"}),Y(D,{width:"180",prop:"createTime",label:"创建时间"}),Y(D,{width:"120",label:"操作"},{default:F((function(e){return[Y(fe,{title:"是否确认删除?",onConfirm:function(n){return t=e.row.id,void r(t).then((function(e){E.success("删除成功"),re()}));var t}},{reference:F((function(){return[Y(U,{icon:R(h),type:"danger"},{default:F((function(){return[ce]})),_:1},8,["icon"])]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data"]),Y(ve,{locale:R(c)},{default:F((function(){return[Y(he,{class:"mt-3","page-size":J.limit,background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:Q,onSizeChange:O,"current-page":J.page,"onUpdate:current-page":i[9]||(i[9]=function(e){return J.page=e}),"default-current-page":10,"page-sizes":[10,50,100,200,1e3,99999999],total:J.total},null,8,["page-size","current-page","total"])]})),_:1},8,["locale"])])]})),_:1})])}}};"function"==typeof x&&x(ie);e("default",_(ie,[["__scopeId","data-v-6efe972e"]]))}}}))}();

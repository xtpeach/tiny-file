import{z as y,u as N,e as Z,I as G,a8 as $,n as A,j as o,o as w,k as S,l as a,b as t,p as e,t as O,c as W,Y,F as H,a as r,s as J,x as K}from"./index.e2144cf2.js";import{E as P}from"./base.a4c7cecc.js";/* empty css                *//* empty css               *//* empty css              *//* empty css            *//* empty css               *//* empty css                  *//* empty css               */import"./tooltip.f118fcb0.js";import{E as Q}from"./alert.c13229e5.js";import{_ as X}from"./SvgIcon.26213fd5.js";import{b5 as k,b6 as ee,V as te,aR as oe}from"./index.8d3be363.js";import{Z as z,a as ae}from"./ZFormItem.99bc3a03.js";import{j as ie,k as le,e as re}from"./admin-storage.0cee6b67.js";import{u as se,r as ne}from"./common.520b7241.js";import{E as de}from"./request.538cacc7.js";import{E as me}from"./index.911dd79c.js";import{b as B}from"./route-block.89f12ae7.js";import{_ as pe}from"./plugin-vue_export-helper.21dcd24c.js";import{E as ce}from"./index.f710691a.js";import{E as ue,a as _e}from"./index.0866a0f5.js";import{r as fe}from"./BadgeCheckIcon.ec7d0d76.js";import{E as he}from"./index.b76f3ddb.js";import{v as ge}from"./directive.a214ca06.js";import"./index.5cf4e3bb.js";import"./index.d27b8c90.js";import"./scroll.2d8cca42.js";import"./event.3ec63147.js";import"./focus-trap.3717ddd7.js";import"./validator.e67486a3.js";import"./index.4971e309.js";import"./event.776e7e11.js";import"./index.893d9621.js";import"./index.fc5d6137.js";import"./isEqual.f1560033.js";import"./debounce.ef6045fb.js";import"./index.fa9b58ef.js";let l=y([]),I=y(!1);function ve(s,c){let m=c.params.storageId;const h=()=>{ie(m).then(n=>{l.value=n.data,l.value.length===0&&u()})},g=()=>{l.value.find(p=>{if(se.isEmpty(p.expression))return de.warning("\u8BF7\u68C0\u67E5\u6570\u636E\u586B\u5199\u662F\u5426\u5B8C\u6574"),!0})||(I.value=!0,le(m,l.value).then(()=>{me.confirm("\u4FDD\u5B58\u6210\u529F, \u662F\u5426\u8FD4\u56DE\u5B58\u50A8\u6E90\u5217\u8868\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"success",callback:p=>{p==="confirm"&&s.push("/admin/storage-list")}})}).finally(()=>{I.value=!1}))},u=()=>{l.value.push({mode:"hidden",expression:"",storageId:m,description:"\u8868\u8FBE\u5F0F - "+l.value.length})};return{loading:I,loadFilterData:h,filterList:l,addFilterItem:u,deleteFilterItem:n=>{l.value.splice(n,1)},saveFilterData:g}}const f=s=>(J("data-v-6ed8b228"),s=s(),K(),s),be={class:"flex justify-items-center"},xe=f(()=>t("div",{class:"rules-tips"},"Glob \u8868\u8FBE\u5F0F\u89C4\u5219\uFF1A",-1)),we=f(()=>t("div",{class:"rules-tips"},[t("b",null,"*"),r("\uFF1A\u5355\u7EA7\u8DEF\u5F84\u901A\u914D\u7B26\uFF0C\u5982\u8868\u8FBE\u5F0F "),t("span",{class:"select-all code"},"/*.jpg"),r(" \u53EF\u4EE5\u5339\u914D\u6839\u8DEF\u5F84\u4E0B\u6240\u6709\u7684 jpg \u540E\u7F00\u7684\u6587\u4EF6")],-1)),ke=f(()=>t("div",{class:"rules-tips"},[t("b",null,"**"),r("\uFF1A\u591A\u7EA7\u8DEF\u5F84\u901A\u914D\u7B26\uFF0C\u5982\u8868\u8FBE\u5F0F "),t("span",{class:"select-all code"},"/**.jpg"),r(" \u53EF\u4EE5\u5339\u914D\u6240\u6709\u8DEF\u5F84\u4E0B\u7684 jpg \u540E\u7F00\u7684\u6587\u4EF6")],-1)),Ie={class:"rules-tips-link"},ye={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},Fe=f(()=>t("span",null,"\u53C2\u8003\u6587\u7AE0 (Wikipedia)",-1)),Ee={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},Ve=r("\u53C2\u8003\u6587\u7AE0 (\u962E\u4E00\u5CF0)"),Se={target:"_blank",class:"link",href:"https://github.com/whinc/blog/issues/18"},ze=r("\u53C2\u8003\u6587\u7AE0 (Github)"),Be={class:"sm:flex sm:space-x-2 sm:border-b-0 sm:pb-0 border-b pb-2"},Ce=r("\u6DFB\u52A0\u66F4\u591A"),je=r("\u4FDD\u5B58\u8BBE\u7F6E"),C={__name:"[storageId]",setup(s){let c=N(),m=Z(),h=c.params.storageId;const{loading:g,loadFilterData:u,filterList:v,addFilterItem:n,deleteFilterItem:p,saveFilterData:j}=ve(m,c);G(()=>{u(),D()});const F=y(),D=()=>{re(h).then(_=>{_.data.type=_.data.type.key,F.value=_.data})};return(_,De)=>{const R=X,U=$("router-link"),q=Q,E=ce,L=he,b=ue,M=_e,x=P,T=ge;return A((w(),S(ae,{model:o(v),class:"zfile-admin-filter-form"},{"form-title":a(()=>{var i;return[t("div",be,[e(U,{to:"/admin/storage-list"},{default:a(()=>[e(R,{class:"inline mr-2 cursor-pointer",name:"file-type-back"})]),_:1}),t("span",null,"\u8FC7\u6EE4\u6587\u4EF6\uFF08"+O((i=F.value)==null?void 0:i.name)+"\uFF09",1)])]}),"form-sub-title":a(()=>[e(q,{closable:!1,type:"info"},{default:a(()=>[xe,we,ke,t("div",Ie,[t("a",ye,[e(o(k),{class:"inline mr-1"}),Fe]),t("a",Ee,[e(o(k),{class:"inline mr-1"}),Ve]),t("a",Se,[e(o(k),{class:"inline mr-1"}),ze])])]),_:1})]),footer:a(()=>[e(x,{type:"primary",size:"default",icon:o(fe),onClick:o(j)},{default:a(()=>[je]),_:1},8,["icon","onClick"])]),default:a(()=>[(w(!0),W(H,null,Y(o(v),(i,V)=>(w(),S(z,{required:!0,key:V,class:"expression-item"},{default:a(()=>[t("div",Be,[e(L,{content:"\u6B64\u5904\u53EF\u586B\u5199\u8868\u8FBE\u4E66\u63CF\u8FF0\uFF0C\u7528\u4E8E\u8F85\u52A9\u8BB0\u5FC6\uFF0C\u9632\u6B62\u65F6\u95F4\u8FC7\u957F\u540E\u4E0D\u77E5\u9053\u8868\u8FBE\u5F0F\u542B\u4E49.",placement:"top"},{default:a(()=>[e(E,{"prefix-icon":o(ee),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F\u63CF\u8FF0",modelValue:i.description,"onUpdate:modelValue":d=>i.description=d},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])]),_:2},1024),e(E,{"prefix-icon":o(ne),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F",modelValue:i.expression,"onUpdate:modelValue":d=>i.expression=d,modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"]),e(M,{class:"editor-input",modelValue:i.mode,"onUpdate:modelValue":d=>i.mode=d},{default:a(()=>[e(b,{label:"\u4EC5\u9690\u85CF",value:"hidden"}),e(b,{label:"\u9690\u85CF\u5E76\u4E0D\u53EF\u8BBF\u95EE(\u9488\u5BF9\u76EE\u5F55)",value:"inaccessible"}),e(b,{label:"\u9690\u85CF\u5E76\u4E0D\u53EF\u8BBF\u95EE\u4E0D\u53EF\u4E0B\u8F7D(\u9488\u5BF9\u6587\u4EF6)",value:"disable_download"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(x,{type:"danger",onClick:d=>o(p)(V),icon:o(te)},null,8,["onClick","icon"])])]),_:2},1024))),128)),e(z,null,{default:a(()=>[e(x,{type:"primary",size:"default",icon:o(oe),onClick:o(n)},{default:a(()=>[Ce]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["model"])),[[T,o(g)]])}}};typeof B=="function"&&B(C);var vt=pe(C,[["__scopeId","data-v-6ed8b228"]]);export{vt as default};

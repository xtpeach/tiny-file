var Xe=Object.defineProperty,Ye=Object.defineProperties;var qe=Object.getOwnPropertyDescriptors;var Ie=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var Ee=(a,l,s)=>l in a?Xe(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,Q=(a,l)=>{for(var s in l||(l={}))Ze.call(l,s)&&Ee(a,s,l[s]);if(Ie)for(var s of Ie(l))Ge.call(l,s)&&Ee(a,s,l[s]);return a},ke=(a,l)=>Ye(a,qe(l));var $=(a,l,s)=>new Promise((o,c)=>{var d=i=>{try{b(s.next(i))}catch(y){c(y)}},u=i=>{try{b(s.throw(i))}catch(y){c(y)}},b=i=>i.done?o(i.value):Promise.resolve(i.value).then(d,u);b((s=s.apply(a,l)).next())});import{A as f,g as Fe,z as A,E as Je,ao as Qe,S as et,y as ee,w as te,a5 as N,I as tt,aa as at,Q as ot,n as st,v as nt,o as p,c as x,m,F as ae,r as h,j as t,G as W,b as V,k as w,l as B,J as U,Z as oe,p as lt,K as rt,t as _,L as it}from"./index.e2144cf2.js";import{m as ut,c as ct}from"./request.538cacc7.js";import{av as dt,j as ze,h as pt,m as ft,l as se,o as Pe,v as ne,H as vt,F as mt,u as $e,aw as yt,ax as ht,ay as bt,E as O,O as gt,S as xt,_ as wt,i as St,ac as Ne,k as Ct}from"./index.8d3be363.js";import{U as le}from"./event.776e7e11.js";import{c as It,a as Et,i as kt,d as Ve}from"./base.a4c7cecc.js";const zt=a=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(a),Pt=["class","style"],$t=/^on[A-Z]/,Nt=(a={})=>{const{excludeListeners:l=!1,excludeKeys:s}=a,o=f(()=>((s==null?void 0:s.value)||[]).concat(Pt)),c=Fe();return c?f(()=>{var d;return dt(Object.entries((d=c.proxy)==null?void 0:d.$attrs).filter(([u])=>!o.value.includes(u)&&!(l&&$t.test(u))))}):f(()=>({}))};function Vt(a){const l=A();function s(){if(a.value==null)return;const{selectionStart:c,selectionEnd:d,value:u}=a.value;if(c==null||d==null)return;const b=u.slice(0,Math.max(0,c)),i=u.slice(Math.max(0,d));l.value={selectionStart:c,selectionEnd:d,value:u,beforeTxt:b,afterTxt:i}}function o(){if(a.value==null||l.value==null)return;const{value:c}=a.value,{beforeTxt:d,afterTxt:u,selectionStart:b}=l.value;if(d==null||u==null||b==null)return;let i=c.length;if(c.endsWith(u))i=c.length-u.length;else if(c.startsWith(d))i=d.length;else{const y=d[b-1],S=c.indexOf(y,b-1);S!==-1&&(i=S+1)}a.value.setSelectionRange(i,i)}return[s,o]}let g;const At=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Ft=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Tt(a){const l=window.getComputedStyle(a),s=l.getPropertyValue("box-sizing"),o=Number.parseFloat(l.getPropertyValue("padding-bottom"))+Number.parseFloat(l.getPropertyValue("padding-top")),c=Number.parseFloat(l.getPropertyValue("border-bottom-width"))+Number.parseFloat(l.getPropertyValue("border-top-width"));return{contextStyle:Ft.map(u=>`${u}:${l.getPropertyValue(u)}`).join(";"),paddingSize:o,borderSize:c,boxSizing:s}}function Ae(a,l=1,s){var o;g||(g=document.createElement("textarea"),document.body.appendChild(g));const{paddingSize:c,borderSize:d,boxSizing:u,contextStyle:b}=Tt(a);g.setAttribute("style",`${b};${At}`),g.value=a.value||a.placeholder||"";let i=g.scrollHeight;const y={};u==="border-box"?i=i+d:u==="content-box"&&(i=i-c),g.value="";const S=g.scrollHeight-c;if(ze(l)){let v=S*l;u==="border-box"&&(v=v+c+d),i=Math.max(v,i),y.minHeight=`${v}px`}if(ze(s)){let v=S*s;u==="border-box"&&(v=v+c+d),i=Math.min(v,i)}return y.height=`${i}px`,(o=g.parentNode)==null||o.removeChild(g),g=void 0,y}const Mt=pt({id:{type:String,default:void 0},size:ft,disabled:Boolean,modelValue:{type:se([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:se([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Pe,default:""},prefixIcon:{type:Pe,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:se([Object,Array,String]),default:()=>ut({})}}),Lt={[le]:a=>ne(a),input:a=>ne(a),change:a=>ne(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent},Bt=["role"],Ot=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],Rt=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"],Dt={name:"ElInput",inheritAttrs:!1},Ht=Je(ke(Q({},Dt),{props:Mt,emits:Lt,setup(a,{expose:l,emit:s}){const o=a,c={suffix:"append",prefix:"prepend"},d=Fe(),u=Qe(),b=et(),i=f(()=>{const e={};return o.containerRole==="combobox"&&(e["aria-haspopup"]=u["aria-haspopup"],e["aria-owns"]=u["aria-owns"],e["aria-expanded"]=u["aria-expanded"]),e}),y=Nt({excludeKeys:f(()=>Object.keys(i.value))}),{form:S,formItem:v}=It(),{inputId:re}=Et(o,{formItemContext:v}),Te=vt(),k=mt(),n=$e("input"),ie=$e("textarea"),R=ee(),z=ee(),F=A(!1),X=A(!1),T=A(!1),D=A(!1),ue=A(),Y=ee(o.inputStyle),M=f(()=>R.value||z.value),ce=f(()=>{var e;return(e=S==null?void 0:S.statusIcon)!=null?e:!1}),L=f(()=>(v==null?void 0:v.validateState)||""),de=f(()=>L.value&&yt[L.value]),Me=f(()=>D.value?ht:bt),Le=f(()=>[u.style,o.inputStyle]),pe=f(()=>[o.inputStyle,Y.value,{resize:o.resize}]),C=f(()=>kt(o.modelValue)?"":String(o.modelValue)),H=f(()=>o.clearable&&!k.value&&!o.readonly&&!!C.value&&(F.value||X.value)),q=f(()=>o.showPassword&&!k.value&&!o.readonly&&!!C.value&&(!!C.value||F.value)),P=f(()=>o.showWordLimit&&!!y.value.maxlength&&(o.type==="text"||o.type==="textarea")&&!k.value&&!o.readonly&&!o.showPassword),Z=f(()=>Array.from(C.value).length),Be=f(()=>!!P.value&&Z.value>Number(y.value.maxlength)),Oe=f(()=>!!b.suffix||!!o.suffixIcon||H.value||o.showPassword||P.value||!!L.value&&ce.value),[Re,De]=Vt(R);ct(z,e=>{if(!P.value||o.resize!=="both")return;const r=e[0],{width:I}=r.contentRect;ue.value={right:`calc(100% - ${I+15+6}px)`}});const j=()=>{const{type:e,autosize:r}=o;if(!(!St||e!=="textarea"))if(r){const I=Ne(r)?r.minRows:void 0,E=Ne(r)?r.maxRows:void 0;Y.value=Q({},Ae(z.value,I,E))}else Y.value={minHeight:Ae(z.value).minHeight}},K=()=>{const e=M.value;!e||e.value===C.value||(e.value=C.value)},fe=e=>{const{el:r}=d.vnode;if(!r)return;const E=Array.from(r.querySelectorAll(`.${n.e(e)}`)).find(_e=>_e.parentNode===r);if(!E)return;const Ce=c[e];b[Ce]?E.style.transform=`translateX(${e==="suffix"?"-":""}${r.querySelector(`.${n.be("group",Ce)}`).offsetWidth}px)`:E.removeAttribute("style")},G=()=>{fe("prefix"),fe("suffix")},J=e=>$(this,null,function*(){Re();let{value:r}=e.target;o.formatter&&(r=o.parser?o.parser(r):r,r=o.formatter(r)),!T.value&&r!==C.value&&(s(le,r),s("input",r),yield N(),K(),De())}),ve=e=>{s("change",e.target.value)},me=e=>{s("compositionstart",e),T.value=!0},ye=e=>{var r;s("compositionupdate",e);const I=(r=e.target)==null?void 0:r.value,E=I[I.length-1]||"";T.value=!zt(E)},he=e=>{s("compositionend",e),T.value&&(T.value=!1,J(e))},He=()=>{D.value=!D.value,be()},be=()=>$(this,null,function*(){var e;yield N(),(e=M.value)==null||e.focus()}),je=()=>{var e;return(e=M.value)==null?void 0:e.blur()},ge=e=>{F.value=!0,s("focus",e)},xe=e=>{var r;F.value=!1,s("blur",e),o.validateEvent&&((r=v==null?void 0:v.validate)==null||r.call(v,"blur").catch(I=>Ve()))},Ke=e=>{X.value=!1,s("mouseleave",e)},We=e=>{X.value=!0,s("mouseenter",e)},we=e=>{s("keydown",e)},Ue=()=>{var e;(e=M.value)==null||e.select()},Se=()=>{s(le,""),s("change",""),s("clear"),s("input","")};return te(()=>o.modelValue,()=>{var e;N(()=>j()),o.validateEvent&&((e=v==null?void 0:v.validate)==null||e.call(v,"change").catch(r=>Ve()))}),te(C,()=>K()),te(()=>o.type,()=>$(this,null,function*(){yield N(),K(),j(),G()})),tt(()=>$(this,null,function*(){!o.formatter&&o.parser,K(),G(),yield N(),j()})),at(()=>$(this,null,function*(){yield N(),G()})),l({input:R,textarea:z,ref:M,textareaStyle:pe,autosize:ot(o,"autosize"),focus:be,blur:je,select:Ue,clear:Se,resizeTextarea:j}),(e,r)=>st((p(),x("div",oe(t(i),{class:[e.type==="textarea"?t(ie).b():t(n).b(),t(n).m(t(Te)),t(n).is("disabled",t(k)),t(n).is("exceed",t(Be)),{[t(n).b("group")]:e.$slots.prepend||e.$slots.append,[t(n).bm("group","append")]:e.$slots.append,[t(n).bm("group","prepend")]:e.$slots.prepend,[t(n).m("prefix")]:e.$slots.prefix||e.prefixIcon,[t(n).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[t(n).bm("suffix","password-clear")]:t(H)&&t(q)},e.$attrs.class],style:t(Le),role:e.containerRole,onMouseenter:We,onMouseleave:Ke}),[m(" input "),e.type!=="textarea"?(p(),x(ae,{key:0},[m(" prepend slot "),e.$slots.prepend?(p(),x("div",{key:0,class:h(t(n).be("group","prepend"))},[W(e.$slots,"prepend")],2)):m("v-if",!0),V("div",{class:h([t(n).e("wrapper"),t(n).is("focus",F.value)])},[m(" prefix slot "),e.$slots.prefix||e.prefixIcon?(p(),x("span",{key:0,class:h(t(n).e("prefix"))},[V("span",{class:h(t(n).e("prefix-inner"))},[W(e.$slots,"prefix"),e.prefixIcon?(p(),w(t(O),{key:0,class:h(t(n).e("icon"))},{default:B(()=>[(p(),w(U(e.prefixIcon)))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0),V("input",oe({id:t(re),ref_key:"input",ref:R,class:t(n).e("inner")},t(y),{type:e.showPassword?D.value?"text":"password":e.type,disabled:t(k),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:me,onCompositionupdate:ye,onCompositionend:he,onInput:J,onFocus:ge,onBlur:xe,onChange:ve,onKeydown:we}),null,16,Ot),m(" suffix slot "),t(Oe)?(p(),x("span",{key:1,class:h(t(n).e("suffix"))},[V("span",{class:h(t(n).e("suffix-inner"))},[!t(H)||!t(q)||!t(P)?(p(),x(ae,{key:0},[W(e.$slots,"suffix"),e.suffixIcon?(p(),w(t(O),{key:0,class:h(t(n).e("icon"))},{default:B(()=>[(p(),w(U(e.suffixIcon)))]),_:1},8,["class"])):m("v-if",!0)],64)):m("v-if",!0),t(H)?(p(),w(t(O),{key:1,class:h([t(n).e("icon"),t(n).e("clear")]),onMousedown:rt(t(xt),["prevent"]),onClick:Se},{default:B(()=>[lt(t(gt))]),_:1},8,["class","onMousedown"])):m("v-if",!0),t(q)?(p(),w(t(O),{key:2,class:h([t(n).e("icon"),t(n).e("password")]),onClick:He},{default:B(()=>[(p(),w(U(t(Me))))]),_:1},8,["class"])):m("v-if",!0),t(P)?(p(),x("span",{key:3,class:h(t(n).e("count"))},[V("span",{class:h(t(n).e("count-inner"))},_(t(Z))+" / "+_(t(y).maxlength),3)],2)):m("v-if",!0),t(L)&&t(de)&&t(ce)?(p(),w(t(O),{key:4,class:h([t(n).e("icon"),t(n).e("validateIcon"),t(n).is("loading",t(L)==="validating")])},{default:B(()=>[(p(),w(U(t(de))))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0)],2),m(" append slot "),e.$slots.append?(p(),x("div",{key:1,class:h(t(n).be("group","append"))},[W(e.$slots,"append")],2)):m("v-if",!0)],64)):(p(),x(ae,{key:1},[m(" textarea "),V("textarea",oe({id:t(re),ref_key:"textarea",ref:z,class:t(ie).e("inner")},t(y),{tabindex:e.tabindex,disabled:t(k),readonly:e.readonly,autocomplete:e.autocomplete,style:t(pe),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:me,onCompositionupdate:ye,onCompositionend:he,onInput:J,onFocus:ge,onBlur:xe,onChange:ve,onKeydown:we}),null,16,Rt),t(P)?(p(),x("span",{key:0,style:it(ue.value),class:h(t(n).e("count"))},_(t(Z))+" / "+_(t(y).maxlength),7)):m("v-if",!0)],64))],16,Bt)),[[nt,e.type!=="hidden"]])}}));var jt=wt(Ht,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const qt=Ct(jt);export{qt as E,zt as i,Nt as u};

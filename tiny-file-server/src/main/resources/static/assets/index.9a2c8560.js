var ue=Object.defineProperty,se=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var j=(t,i,s)=>i in t?ue(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,G=(t,i)=>{for(var s in i||(i={}))oe.call(i,s)&&j(t,s,i[s]);if($)for(var s of $(i))ce.call(i,s)&&j(t,s,i[s]);return t},H=(t,i)=>se(t,ie(i));import{E as de,z as me,B as pe,A as h,w as be,I as fe,aa as ve,o as f,c as C,n as L,j as a,r as x,a0 as w,p as B,l as Y,k as E,m as Q,K as T}from"./index.e2144cf2.js";import{E as Ne}from"./index.f710691a.js";import{h as Ve,m as he,j as p,u as Ie,ad as S,H as ge,F as _e,a2 as ye,aQ as we,E as W,a3 as Ee,aR as Se,_ as ke,v as Pe,k as Ae}from"./index.8d3be363.js";import{C as Fe,I as Ce,U as xe}from"./event.776e7e11.js";import{i as I,c as Be,d as q}from"./base.a4c7cecc.js";import{u as Te}from"./index.4971e309.js";import{v as J}from"./index.7fa0be7b.js";const ze=Ve({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,disabled:Boolean,size:he,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||p(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)}}),De={[Fe]:(t,i)=>t!==i,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[Ce]:t=>p(t)||I(t),[xe]:t=>p(t)||I(t)},Ke=["aria-label","onKeydown"],Me=["aria-label","onKeydown"],Oe={name:"ElInputNumber"},Ue=de(H(G({},Oe),{props:ze,emits:De,setup(t,{expose:i,emit:s}){const r=t,{t:z}=Te(),m=Ie("input-number"),N=me(),o=pe({currentValue:r.modelValue,userInput:null}),{formItem:v}=Be(),D=h(()=>p(r.modelValue)&&g(r.modelValue,-1)<r.min),K=h(()=>p(r.modelValue)&&g(r.modelValue)>r.max),X=h(()=>{const e=U(r.step);return S(r.precision)?Math.max(U(r.modelValue),e):(e>r.precision,r.precision)}),k=h(()=>r.controls&&r.controlsPosition==="right"),M=ge(),V=_e(),Z=h(()=>{if(o.userInput!==null)return o.userInput;let e=o.currentValue;if(I(e))return"";if(p(e)){if(Number.isNaN(e))return"";S(r.precision)||(e=e.toFixed(r.precision))}return e}),O=(e,n)=>{if(S(n)&&(n=X.value),n===0)return Math.round(e);let l=String(e);const u=l.indexOf(".");if(u===-1||!l.replace(".","").split("")[u+n])return e;const _=l.length;return l.charAt(_-1)==="5"&&(l=`${l.slice(0,Math.max(0,_-1))}6`),Number.parseFloat(Number(l).toFixed(n))},U=e=>{if(I(e))return 0;const n=e.toString(),l=n.indexOf(".");let u=0;return l!==-1&&(u=n.length-l-1),u},g=(e,n=1)=>p(e)?O(e+r.step*n):o.currentValue,P=()=>{if(V.value||K.value)return;const e=r.modelValue||0,n=g(e);F(n)},A=()=>{if(V.value||D.value)return;const e=r.modelValue||0,n=g(e,-1);F(n)},R=(e,n)=>{const{max:l,min:u,step:c,precision:b,stepStrictly:_,valueOnClear:y}=r;let d=Number(e);if(I(e)||Number.isNaN(d))return null;if(e===""){if(y===null)return null;d=Pe(y)?{min:u,max:l}[y]:y}return _&&(d=Math.round(d/c)*c),S(b)||(d=O(d,b)),(d>l||d<u)&&(d=d>l?l:u,n&&s("update:modelValue",d)),d},F=e=>{var n;const l=o.currentValue,u=R(e);l!==u&&(o.userInput=null,s("update:modelValue",u),s("input",u),s("change",u,l),(n=v==null?void 0:v.validate)==null||n.call(v,"change").catch(c=>q()),o.currentValue=u)},ee=e=>o.userInput=e,ne=e=>{const n=e!==""?Number(e):"";(p(n)&&!Number.isNaN(n)||e==="")&&F(n),o.userInput=null},te=()=>{var e,n;(n=(e=N.value)==null?void 0:e.focus)==null||n.call(e)},ae=()=>{var e,n;(n=(e=N.value)==null?void 0:e.blur)==null||n.call(e)},re=e=>{s("focus",e)},le=e=>{var n;s("blur",e),(n=v==null?void 0:v.validate)==null||n.call(v,"blur").catch(l=>q())};return be(()=>r.modelValue,e=>{o.currentValue=R(e,!0),o.userInput=null},{immediate:!0}),fe(()=>{var e;const{min:n,max:l,modelValue:u}=r,c=(e=N.value)==null?void 0:e.input;if(c.setAttribute("role","spinbutton"),Number.isFinite(l)?c.setAttribute("aria-valuemax",String(l)):c.removeAttribute("aria-valuemax"),Number.isFinite(n)?c.setAttribute("aria-valuemin",String(n)):c.removeAttribute("aria-valuemin"),c.setAttribute("aria-valuenow",String(o.currentValue)),c.setAttribute("aria-disabled",String(V.value)),!p(u)&&u!=null){let b=Number(u);Number.isNaN(b)&&(b=null),s("update:modelValue",b)}}),ve(()=>{var e;const n=(e=N.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${o.currentValue}`)}),i({focus:te,blur:ae}),(e,n)=>(f(),C("div",{class:x([a(m).b(),a(m).m(a(M)),a(m).is("disabled",a(V)),a(m).is("without-controls",!e.controls),a(m).is("controls-right",a(k))]),onDragstart:n[0]||(n[0]=T(()=>{},["prevent"]))},[e.controls?L((f(),C("span",{key:0,role:"button","aria-label":a(z)("el.inputNumber.decrease"),class:x([a(m).e("decrease"),a(m).is("disabled",a(D))]),onKeydown:w(A,["enter"])},[B(a(W),null,{default:Y(()=>[a(k)?(f(),E(a(ye),{key:0})):(f(),E(a(we),{key:1}))]),_:1})],42,Ke)),[[a(J),A]]):Q("v-if",!0),e.controls?L((f(),C("span",{key:1,role:"button","aria-label":a(z)("el.inputNumber.increase"),class:x([a(m).e("increase"),a(m).is("disabled",a(K))]),onKeydown:w(P,["enter"])},[B(a(W),null,{default:Y(()=>[a(k)?(f(),E(a(Ee),{key:0})):(f(),E(a(Se),{key:1}))]),_:1})],42,Me)),[[a(J),P]]):Q("v-if",!0),B(a(Ne),{id:e.id,ref_key:"input",ref:N,type:"number",step:e.step,"model-value":a(Z),placeholder:e.placeholder,disabled:a(V),size:a(M),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[w(T(P,["prevent"]),["up"]),w(T(A,["prevent"]),["down"])],onBlur:le,onFocus:re,onInput:ee,onChange:ne},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown"])],34))}}));var Re=ke(Ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const qe=Ae(Re);export{qe as E};

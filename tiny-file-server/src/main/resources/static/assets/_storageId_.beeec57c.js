import{o as w,k as V,p as o,z as S,u as T,e as j,I as H,a8 as N,n as Z,j as t,l as r,b as e,t as $,c as A,Y as G,F as W,a as l,s as Y,x as J}from"./index.e2144cf2.js";import{E as K}from"./base.a4c7cecc.js";/* empty css                *//* empty css               */import"./tooltip.f118fcb0.js";/* empty css               *//* empty css              */import{E as O}from"./alert.c13229e5.js";import{_ as Q}from"./SvgIcon.26213fd5.js";import{b5 as I,b6 as X,V as ee,aR as ae}from"./index.8d3be363.js";import{Z as P,a as te}from"./ZFormItem.99bc3a03.js";import{m as oe,n as se,e as re}from"./admin-storage.0cee6b67.js";import{u as y,r as ie}from"./common.520b7241.js";import{S as le}from"./sortable.esm.a99254e8.js";import{E as ne}from"./request.538cacc7.js";import{E as de}from"./index.911dd79c.js";import{b as B}from"./route-block.89f12ae7.js";import{_ as pe}from"./plugin-vue_export-helper.21dcd24c.js";import{E as ce}from"./index.f710691a.js";import{r as me}from"./BadgeCheckIcon.ec7d0d76.js";import{E as ue}from"./index.b76f3ddb.js";import{v as _e}from"./directive.a214ca06.js";import"./index.5cf4e3bb.js";import"./index.d27b8c90.js";import"./scroll.2d8cca42.js";import"./event.3ec63147.js";import"./focus-trap.3717ddd7.js";import"./validator.e67486a3.js";import"./index.4971e309.js";import"./event.776e7e11.js";function fe(d,u){return w(),V("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})])}let s=S([]),E=S(!1);function he(d,u){let _=u.params.storageId;const v=()=>{oe(_).then(n=>{s.value=n.data,s.value.length===0&&f(),b()})},b=()=>{const n=document.querySelector(".z-form-body");le.create(n,{draggable:".expression-item",onEnd:a=>{if(a.oldIndex===a.newIndex)return;const p=s.value.splice(a.oldIndex-1,1)[0];s.value.splice(a.newIndex-1,0,p)}})},g=()=>{if(!s.value.find(a=>{if(y.isEmpty(a.description)||y.isEmpty(a.expression)||y.isEmpty(a.password))return ne.warning("\u8BF7\u68C0\u67E5\u6570\u636E\u586B\u5199\u662F\u5426\u5B8C\u6574"),!0})){E.value=!0;for(let a=0;a<s.value.length;a++){let p=s.value[a];p.id=a+1}se(_,s.value).then(()=>{de.confirm("\u4FDD\u5B58\u6210\u529F, \u662F\u5426\u8FD4\u56DE\u5B58\u50A8\u6E90\u5217\u8868\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"success",callback:a=>{a==="confirm"&&d.push("/admin/storage-list")}})}).finally(()=>{E.value=!1})}},f=()=>{s.value.push({description:"\u8868\u8FBE\u5F0F - "+(s.value.length+1),expression:"",password:"",storageId:_})};return{loading:E,loadPasswordData:v,passwordList:s,addPasswordItem:f,deletePasswordItem:n=>{s.value.splice(n,1)},savePasswordData:g}}const m=d=>(Y("data-v-bab6a0aa"),d=d(),J(),d),we={class:"flex justify-items-center"},ve=m(()=>e("div",{class:"rules-tips"},"Glob \u8868\u8FBE\u5F0F\u89C4\u5219\uFF1A",-1)),be=m(()=>e("div",{class:"rules-tips"},[e("b",null,"\u5355\u5C42\u6839\u76EE\u5F55\u52A0\u5BC6"),l(": \u5982 "),e("span",{class:"select-all code"},"/"),l(" \u8868\u793A\u6839\u8DEF\u5F84\u4E0B\u9700\u8981\u5BC6\u7801\u8BBF\u95EE.")],-1)),ge=m(()=>e("div",{class:"rules-tips"},[e("b",null,"\u5355\u5C42\u5B50\u76EE\u5F55\u52A0\u5BC6"),l(": \u5982 "),e("span",{class:"select-all code"},"/music/*"),l(" \u8868\u793A\u6839\u76EE\u5F55\u4E0B\u7684 music \u6587\u4EF6\u5939\u9700\u8981\u5BC6\u7801\u8BBF\u95EE, \u5B50\u6587\u4EF6\u5939\u4E0D\u52A0\u5BC6.")],-1)),xe=m(()=>e("div",{class:"rules-tips"},[e("b",null,"\u5D4C\u5957\u5B50\u76EE\u5F55\u52A0\u5BC6"),l(": \u5982 "),e("span",{class:"select-all code"},"/music/**"),l(" \u8868\u793A\u6839\u76EE\u5F55\u4E0B\u7684 music \u6587\u4EF6\u5939\u53CA\u5176\u6240\u6709\u5B50\u6587\u4EF6\u5939\u90FD\u9700\u8981\u5BC6\u7801\u8BBF\u95EE.")],-1)),ke=m(()=>e("div",{class:"rules-tips"},"\u6CE8\uFF1A\u7CFB\u7EDF\u5339\u914D\u5230\u7B2C\u4E00\u4E2A\u7B26\u5408\u7684\u89C4\u5219\u5C31\u4F1A\u53D6\u5BC6\u7801\u8FDB\u884C\u6821\u9A8C\uFF0C\u5E76\u8FD4\u56DE\u7ED3\u679C\uFF0C\u6240\u4EE5\u8BF7\u8C03\u6574\u597D\u89C4\u5219\u987A\u5E8F\uFF0C\u4E0B\u65B9\u89C4\u5219\u53EF\u8FDB\u884C\u62D6\u62FD\u6392\u5E8F\u3002",-1)),Ie={class:"rules-tips-link"},ye={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},Ee=m(()=>e("span",null,"\u53C2\u8003\u6587\u7AE0 (Wikipedia)",-1)),Ve={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},Se=l("\u53C2\u8003\u6587\u7AE0 (\u962E\u4E00\u5CF0)"),ze={target:"_blank",class:"link",href:"https://github.com/whinc/blog/issues/18"},Pe=l("\u53C2\u8003\u6587\u7AE0 (Github)"),Be={class:"sm:flex sm:space-x-2 sm:border-b-0 sm:pb-0 border-b pb-2"},Ce=l("\u6DFB\u52A0\u66F4\u591A"),Re=l("\u4FDD\u5B58\u8BBE\u7F6E"),C={__name:"[storageId]",setup(d){let u=T(),_=j(),v=u.params.storageId;const{loading:b,loadPasswordData:g,passwordList:f,addPasswordItem:z,deletePasswordItem:n,savePasswordData:a}=he(_,u);H(()=>{g(),R()});const p=S(),R=()=>{re(v).then(h=>{h.data.type=h.data.type.key,p.value=h.data})};return(h,De)=>{const D=Q,F=N("router-link"),U=O,x=ce,q=ue,k=K,L=_e;return Z((w(),V(te,{model:t(f),class:"zfile-admin-password-form"},{"form-title":r(()=>{var i;return[e("div",we,[o(F,{to:"/admin/storage-list"},{default:r(()=>[o(D,{class:"inline mr-2 cursor-pointer",name:"file-type-back"})]),_:1}),e("span",null,"\u5BC6\u7801\u6587\u4EF6\u5939\uFF08"+$((i=p.value)==null?void 0:i.name)+"\uFF09",1)])]}),"form-sub-title":r(()=>[o(U,{closable:!1,type:"info"},{default:r(()=>[ve,be,ge,xe,ke,e("div",Ie,[e("a",ye,[o(t(I),{class:"inline mr-1"}),Ee]),e("a",Ve,[o(t(I),{class:"inline mr-1"}),Se]),e("a",ze,[o(t(I),{class:"inline mr-1"}),Pe])])]),_:1})]),footer:r(()=>[o(k,{type:"primary",size:"default",icon:t(me),onClick:t(a)},{default:r(()=>[Re]),_:1},8,["icon","onClick"])]),default:r(()=>[(w(!0),A(W,null,G(t(f),(i,M)=>(w(),V(P,{required:!0,key:i,class:"expression-item"},{default:r(()=>[e("div",Be,[o(q,{content:"\u6B64\u5904\u53EF\u586B\u5199\u8868\u8FBE\u4E66\u63CF\u8FF0\uFF0C\u7528\u4E8E\u8F85\u52A9\u8BB0\u5FC6\uFF0C\u9632\u6B62\u65F6\u95F4\u8FC7\u957F\u540E\u4E0D\u77E5\u9053\u8868\u8FBE\u5F0F\u542B\u4E49.",placement:"top"},{default:r(()=>[o(x,{"prefix-icon":t(X),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F\u63CF\u8FF0",modelValue:i.description,"onUpdate:modelValue":c=>i.description=c},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])]),_:2},1024),o(x,{"prefix-icon":t(ie),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F",modelValue:i.expression,"onUpdate:modelValue":c=>i.expression=c,modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"]),o(x,{"prefix-icon":t(fe),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",type:"password","show-password":"",modelValue:i.password,"onUpdate:modelValue":c=>i.password=c},null,8,["prefix-icon","modelValue","onUpdate:modelValue"]),o(k,{type:"danger",onClick:c=>t(n)(M),icon:t(ee)},null,8,["onClick","icon"])])]),_:2},1024))),128)),o(P,null,{default:r(()=>[o(k,{type:"primary",size:"default",icon:t(ae),onClick:t(z)},{default:r(()=>[Ce]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["model"])),[[L,t(b)]])}}};typeof B=="function"&&B(C);var pa=pe(C,[["__scopeId","data-v-bab6a0aa"]]);export{pa as default};

var ae=Object.defineProperty,se=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var L=Math.pow,D=(n,l,r)=>l in n?ae(n,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[l]=r,U=(n,l)=>{for(var r in l||(l={}))re.call(l,r)&&D(n,r,l[r]);if(Y)for(var r of Y(l))ne.call(l,r)&&D(n,r,l[r]);return n},V=(n,l)=>se(n,oe(l));import{a as R,c as ie}from"./request.538cacc7.js";import{E as W,P as ce,z as c,A as N,a2 as ue,Q as I,o as H,k as M,l as Q,n as ve,v as fe,b as A,r as T,j as p,L as O,T as me,c as Z,p as K,F as de,w as F,a5 as G,V as pe,B as he,I as be,aa as ye,G as ge,J as we,m as Se}from"./index.e2144cf2.js";import{h as j,u as ee,_ as X,i as ze,l as _e,j as E,ao as q,ac as ke,k as Ee}from"./index.8d3be363.js";import{t as He}from"./base.a4c7cecc.js";const te=Symbol("scrollbarContextKey"),z=4,Te={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Be=({move:n,size:l,bar:r})=>({[r.size]:l,transform:`translate${r.axis}(${n}%)`}),Ce=j({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Pe=W({__name:"thumb",props:Ce,setup(n){const l=n,r="Thumb",a=ce(te),u=ee("scrollbar");a||He(r,"can not inject scrollbar context");const v=c(),o=c(),h=c({}),s=c(!1);let g=!1,w=!1,S=ze?document.onselectstart:null;const t=N(()=>Te[l.vertical?"vertical":"horizontal"]),B=N(()=>Be({size:l.size,move:l.move,bar:t.value})),_=N(()=>L(v.value[t.value.offset],2)/a.wrapElement[t.value.scrollSize]/l.ratio/o.value[t.value.offset]),$=i=>{var f;if(i.stopPropagation(),i.ctrlKey||[1,2].includes(i.button))return;(f=window.getSelection())==null||f.removeAllRanges(),x(i);const m=i.currentTarget;!m||(h.value[t.value.axis]=m[t.value.offset]-(i[t.value.client]-m.getBoundingClientRect()[t.value.direction]))},C=i=>{if(!o.value||!v.value||!a.wrapElement)return;const f=Math.abs(i.target.getBoundingClientRect()[t.value.direction]-i[t.value.client]),m=o.value[t.value.offset]/2,y=(f-m)*100*_.value/v.value[t.value.offset];a.wrapElement[t.value.scroll]=y*a.wrapElement[t.value.scrollSize]/100},x=i=>{i.stopImmediatePropagation(),g=!0,document.addEventListener("mousemove",P),document.addEventListener("mouseup",k),S=document.onselectstart,document.onselectstart=()=>!1},P=i=>{if(!v.value||!o.value||g===!1)return;const f=h.value[t.value.axis];if(!f)return;const m=(v.value.getBoundingClientRect()[t.value.direction]-i[t.value.client])*-1,y=o.value[t.value.offset]-f,le=(m-y)*100*_.value/v.value[t.value.offset];a.wrapElement[t.value.scroll]=le*a.wrapElement[t.value.scrollSize]/100},k=()=>{g=!1,h.value[t.value.axis]=0,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",k),d(),w&&(s.value=!1)},b=()=>{w=!1,s.value=!!l.size},e=()=>{w=!0,s.value=g};ue(()=>{d(),document.removeEventListener("mouseup",k)});const d=()=>{document.onselectstart!==S&&(document.onselectstart=S)};return R(I(a,"scrollbarElement"),"mousemove",b),R(I(a,"scrollbarElement"),"mouseleave",e),(i,f)=>(H(),M(me,{name:p(u).b("fade"),persisted:""},{default:Q(()=>[ve(A("div",{ref_key:"instance",ref:v,class:T([p(u).e("bar"),p(u).is(p(t).key)]),onMousedown:C},[A("div",{ref_key:"thumb",ref:o,class:T(p(u).e("thumb")),style:O(p(B)),onMousedown:$},null,38)],34),[[fe,i.always||s.value]])]),_:1},8,["name"]))}});var J=X(Pe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Le=j({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Ne=W({__name:"bar",props:Le,setup(n,{expose:l}){const r=n,a=c(0),u=c(0);return l({handleScroll:o=>{if(o){const h=o.offsetHeight-z,s=o.offsetWidth-z;u.value=o.scrollTop*100/h*r.ratioY,a.value=o.scrollLeft*100/s*r.ratioX}}}),(o,h)=>(H(),Z(de,null,[K(J,{move:a.value,ratio:o.ratioX,size:o.width,always:o.always},null,8,["move","ratio","size","always"]),K(J,{move:u.value,ratio:o.ratioY,size:o.height,vertical:"",always:o.always},null,8,["move","ratio","size","always"])],64))}});var $e=X(Ne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const xe=j({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:_e([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Re={scroll:({scrollTop:n,scrollLeft:l})=>[n,l].every(E)},Me={name:"ElScrollbar"},Ae=W(V(U({},Me),{props:xe,emits:Re,setup(n,{expose:l,emit:r}){const a=n,u=ee("scrollbar");let v,o;const h=c(),s=c(),g=c(),w=c("0"),S=c("0"),t=c(),B=c(1),_=c(1),$=N(()=>{const e={};return a.height&&(e.height=q(a.height)),a.maxHeight&&(e.maxHeight=q(a.maxHeight)),[a.wrapStyle,e]}),C=()=>{var e;s.value&&((e=t.value)==null||e.handleScroll(s.value),r("scroll",{scrollTop:s.value.scrollTop,scrollLeft:s.value.scrollLeft}))};function x(e,d){ke(e)?s.value.scrollTo(e):E(e)&&E(d)&&s.value.scrollTo(e,d)}const P=e=>{!E(e)||(s.value.scrollTop=e)},k=e=>{!E(e)||(s.value.scrollLeft=e)},b=()=>{if(!s.value)return;const e=s.value.offsetHeight-z,d=s.value.offsetWidth-z,i=L(e,2)/s.value.scrollHeight,f=L(d,2)/s.value.scrollWidth,m=Math.max(i,a.minSize),y=Math.max(f,a.minSize);B.value=i/(e-i)/(m/(e-m)),_.value=f/(d-f)/(y/(d-y)),S.value=m+z<e?`${m}px`:"",w.value=y+z<d?`${y}px`:""};return F(()=>a.noresize,e=>{e?(v==null||v(),o==null||o()):({stop:v}=ie(g,b),o=R("resize",b))},{immediate:!0}),F(()=>[a.maxHeight,a.height],()=>{a.native||G(()=>{var e;b(),s.value&&((e=t.value)==null||e.handleScroll(s.value))})}),pe(te,he({scrollbarElement:h,wrapElement:s})),be(()=>{a.native||G(()=>b())}),ye(()=>b()),l({wrap$:s,update:b,scrollTo:x,setScrollTop:P,setScrollLeft:k,handleScroll:C}),(e,d)=>(H(),Z("div",{ref_key:"scrollbar$",ref:h,class:T(p(u).b())},[A("div",{ref_key:"wrap$",ref:s,class:T([e.wrapClass,p(u).e("wrap"),{[p(u).em("wrap","hidden-default")]:!e.native}]),style:O(p($)),onScroll:C},[(H(),M(we(e.tag),{ref_key:"resize$",ref:g,class:T([p(u).e("view"),e.viewClass]),style:O(e.viewStyle)},{default:Q(()=>[ge(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?Se("v-if",!0):(H(),M($e,{key:0,ref_key:"barRef",ref:t,height:S.value,width:w.value,always:e.always,"ratio-x":_.value,"ratio-y":B.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}}));var Oe=X(Ae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Ue=Ee(Oe);export{Ue as E};

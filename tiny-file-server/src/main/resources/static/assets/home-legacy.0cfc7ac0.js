System.register(["./index-legacy.36e5d91f.js","./request-legacy.2cf0cbaa.js"],(function(e){"use strict";var l,t,n,o;return{setters:[function(e){l=e.z,t=e.A,n=e.ae},function(e){o=e.d}],execute:function(){e("a",a);var i=l([]),r=null;function a(e){e&&(r=e);var l=t((function(){return i.value.length>0?i.value[i.value.length-1]:null})),n=t((function(){return i.value.filter((function(e){return"FILE"===e.type}))})),o=t((function(){return i.value.filter((function(e){return"FOLDER"===e.type}))})),a=t((function(){var e=i.value.length;return{isSingleSelect:1===e,isMultiSelect:e>1,isAllFile:n.value.length===e,isAllFolder:o.value.length===e}}));return{checkSelectable:function(e){return"FILE"===e.type||"FOLDER"===e.type},tableRowClassName:function(e){var l=e.row,t=e.rowIndex;return l.index=t,-1!==i.value.indexOf(l)?"select-row":""},selectRowsChange:function(e){i.value=e},selectRow:l,selectRows:i,selectFiles:n,selectFolders:o,selectStatistics:a,clearSelection:function(){r.proxy.$refs.fileTableRef.clearSelection()},toggleRowSelection:function(e,l){"BACK"!==(null==e?void 0:e.type)&&r.proxy.$refs.fileTableRef.toggleRowSelection(e,l)},toggleAllSelection:function(){r.proxy.$refs.fileTableRef.toggleAllSelection()}}}var u=a().selectStatistics;e("u",n("storageConfigStore",{state:function(){return{globalConfig:{siteName:"",directLinkPrefix:"",infoEnable:!1,showLinkBtn:!1,recordDownloadLog:!1,showShortLink:!1,showPathLink:!1,tableSize:"default",rootShowStorage:!0,fileClickMode:"dbclick",showDocument:!1,debugMode:!1,domain:"",icp:"",avatar:"",announcement:"",layout:"full",showAnnouncement:!1,searchEnable:!1,showLogin:!1},folderConfig:{readmeText:null,readmeDisplayMode:null,defaultSwitchToImgMode:!1,enableFileOperator:!1}}},getters:{permission:function(e){return{open:u.value.isSingleSelect&&u.value.isAllFolder,preview:u.value.isAllFile&&u.value.isSingleSelect,download:u.value.isAllFile,link:u.value.isAllFile&&e.globalConfig.showLinkBtn&&(e.globalConfig.showShortLink||e.globalConfig.showPathLink),rename:e.folderConfig.enableFileOperator&&u.value.isSingleSelect,delete:e.folderConfig.enableFileOperator,newFolder:e.folderConfig.enableFileOperator,upload:e.folderConfig.enableFileOperator,pathLink:e.globalConfig.showPathLink,shortLink:e.globalConfig.showShortLink}}},actions:{updateGlobalConfig:function(e){this.globalConfig=e},updateFolderConfig:function(e){this.folderConfig=e}}})),e("l",(function(e){return o({url:"/api/storage/files",method:"post",data:e,config:{showDefaultMsg:!1}})})),e("e",(function(e){return o({url:"/api/storage/file/item",method:"post",data:e,config:{responseIntercept:!1,showDefaultMsg:!1}})})),e("d",(function(){return o({url:"/api/site/config/global",method:"get"})})),e("c",(function(e){return o({url:"/api/site/config/storage",method:"post",data:e})})),e("b",(function(e){return o({url:"/api/short-link/batch/generate",method:"post",data:e})}))}}}));
